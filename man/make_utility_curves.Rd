% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utility_functions.R
\name{make_utility_curves}
\alias{make_utility_curves}
\title{Compute Expected Utility Curves for Lineup Identification}
\usage{
make_utility_curves(
  data,
  base_rate = 0.5,
  utility_matrix = c(tp = 1, fn = -0.5, fp = -2, tn = 0.5),
  lineup_size = 6,
  criteria = c("confidence", "all")
)
}
\arguments{
\item{data}{A dataframe with the following columns:
\itemize{
  \item target_present: Logical. TRUE if guilty suspect in lineup
  \item identification: Character. "suspect", "filler", or "reject"
  \item confidence: Numeric. Confidence rating (higher = more confident)
}}

\item{base_rate}{Numeric. Prior probability that suspect is guilty (0 to 1).
Default = 0.5.}

\item{utility_matrix}{Named numeric vector with utilities/costs for:
\itemize{
  \item tp: True positive (correct suspect ID) - typically positive
  \item fn: False negative (miss/rejection of guilty) - typically negative
  \item fp: False positive (innocent suspect ID) - typically very negative
  \item tn: True negative (correct rejection of innocent) - typically positive
}
Default: c(tp=1, fn=-0.5, fp=-2, tn=0.5)}

\item{lineup_size}{Integer. Number of people in lineup (default = 6).
Used to estimate false IDs from filler choices.}

\item{criteria}{Character. How to define decision criteria:
\itemize{
  \item "confidence": Use confidence thresholds (cumulative from high to low)
  \item "all": Include all identifications regardless of confidence
}
Default = "confidence".}
}
\value{
A list containing:
  \itemize{
    \item utility_data: Dataframe with criterion, hit rate, false alarm rate,
      and expected utility
    \item max_utility: Maximum expected utility and corresponding criterion
    \item avg_utility: Average expected utility across all criteria
    \item utility_all_ids: Expected utility if all IDs are accepted
    \item base_rate: Base rate used
    \item utility_matrix: Utility matrix used
  }
}
\description{
Computes expected utility at different confidence criteria following
Lampinen, Smith, & Wells (2019). Utility analysis accounts for the
costs and benefits of different identification outcomes.
}
\details{
Expected utility combines hit rates and false alarm rates with the costs/benefits
of different outcomes:

\deqn{EU = base\_rate \cdot [hit \cdot U_{TP} + (1-hit) \cdot U_{FN}] +}
\deqn{     (1-base\_rate) \cdot [fa \cdot U_{FP} + (1-fa) \cdot U_{TN}]}

Where:
\itemize{
  \item hit = p(suspect ID | guilty) at criterion
  \item fa = p(suspect ID | innocent) at criterion
  \item U_TP, U_FN, U_FP, U_TN = utilities for each outcome
}

The utility matrix should reflect the relative value/cost of outcomes. For example:
\itemize{
  \item tp = 1: Correctly identifying the perpetrator
  \item fn = -0.5: Missing the perpetrator (they remain at large)
  \item fp = -2: Wrongly convicting an innocent person (severe injustice)
  \item tn = 0.5: Correctly rejecting when innocent
}

Lampinen et al. (2019) show that comparing procedures by ROC curves alone
can be misleading. Utility analysis incorporates base rates and the relative
costs of errors, providing a more complete evaluation.
}
\references{
Lampinen, J. M., Smith, A. M., & Wells, G. L. (2019). Four utilities in
eyewitness identification practice: Dissociations between receiver operating
characteristic analysis and expected utility analysis. \emph{Law and Human
Behavior, 43}(1), 26-44.
}
