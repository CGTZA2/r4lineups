% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ppv_range_functions.R
\name{ppv_by_confidence}
\alias{ppv_by_confidence}
\title{Compute PPV by Confidence with Lineup Size Correction}
\usage{
ppv_by_confidence(
  data,
  lineup_size = 6,
  confidence_bins = NULL,
  correction = c("nominal", "effective", "none"),
  effective_size_data = NULL
)
}
\arguments{
\item{data}{A dataframe with columns:
\itemize{
  \item target_present: Logical. TRUE if guilty suspect in lineup
  \item identification: Character. "suspect", "filler", or "reject"
  \item confidence: Numeric. Confidence rating
}}

\item{lineup_size}{Integer. Nominal number of people in lineup (default = 6)}

\item{confidence_bins}{Numeric vector of bin edges for grouping confidence
(e.g., c(0, 60, 80, 100)). If NULL, uses individual confidence levels.}

\item{correction}{Character. Method for estimating innocent-suspect IDs:
"nominal" (best-case, assumes fair lineup), "effective" (accounts for bias),
"none" (worst-case, no correction). Default = "nominal".}

\item{effective_size_data}{Optional dataframe with pre-computed effective sizes
per confidence bin (must have columns: conf_level, effective_size).
If NULL and correction="effective", computes from data.}
}
\value{
A list containing:
  \itemize{
    \item ppv_data: Dataframe with PPV by confidence level
    \item overall_ppv: Overall PPV across all confidence levels
    \item correction_method: The correction method used
    \item lineup_size: Nominal lineup size
  }
}
\description{
Calculates Positive Predictive Value (PPV) for each confidence level,
using a specified method to correct for lineup size when estimating
innocent-suspect identification rates.
}
\details{
PPV (Positive Predictive Value) is the probability that a suspect is guilty
given an identification. The formula is:

PPV = guilty_suspect_IDs / (guilty_suspect_IDs + innocent_suspect_IDs)

Different correction methods estimate innocent_suspect_IDs differently:
\itemize{
  \item "nominal": assumes perfect lineup fairness (error_rate / lineup_size)
  \item "effective": uses effective size to account for bias (error_rate / effective_size)
  \item "none": assumes all errors are innocent-suspect IDs (error_rate)
}
}
\examples{
\dontrun{
# Nominal correction (assumes fair lineup)
ppv_result <- ppv_by_confidence(lineup_data,
                                 correction = "nominal",
                                 confidence_bins = c(0, 60, 80, 100))

# Effective size correction (accounts for bias)
ppv_result <- ppv_by_confidence(lineup_data,
                                 correction = "effective",
                                 confidence_bins = c(0, 60, 80, 100))
}

}
\references{
Fitzgerald, R. J., Tredoux, C. G., & Juncu, S. (2023). Estimation of
eyewitness error rates in fair and biased lineups.
\emph{Law and Human Behavior}.
}
