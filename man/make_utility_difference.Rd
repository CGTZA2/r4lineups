% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utility_functions.R
\name{make_utility_difference}
\alias{make_utility_difference}
\title{Compute Utility Difference Curves Comparing Two Procedures}
\usage{
make_utility_difference(
  data_proc_a,
  data_proc_b,
  base_rate_grid = seq(0.01, 0.99, 0.01),
  utility_matrix = c(tp = 1, fn = -0.5, fp = -2, tn = 0.5),
  utility_type = c("max", "avg", "all"),
  lineup_size = 6
)
}
\arguments{
\item{data_proc_a}{A dataframe for procedure A (standard lineup format)}

\item{data_proc_b}{A dataframe for procedure B (standard lineup format)}

\item{base_rate_grid}{Numeric vector of base rates to evaluate.
Default: seq(0.01, 0.99, 0.01)}

\item{utility_matrix}{Named numeric vector with utilities (tp, fn, fp, tn).
Default: c(tp=1, fn=-0.5, fp=-2, tn=0.5)}

\item{utility_type}{Character. Which utility to compare:
\itemize{
  \item "max": Maximum utility (optimal criterion)
  \item "avg": Average utility across all criteria
  \item "all": Utility of accepting all identifications
}
Default = "max".}

\item{lineup_size}{Integer. Lineup size (default = 6)}
}
\value{
A list containing:
  \itemize{
    \item difference_curve: Dataframe with base_rate, eu_a, eu_b, and difference
    \item utility_type: Type of utility compared
    \item utility_matrix: Utility matrix used
    \item crossover_points: Base rates where procedures have equal utility (if any)
  }
}
\description{
Computes the difference in expected utility between two lineup procedures
across a range of base rates and/or utility matrices, following Lampinen,
Smith, & Wells (2019).
}
\details{
Utility difference curves show how the relative value of two procedures
changes with the base rate (prevalence) of guilty suspects. This addresses
the question: "Which procedure is better, and does it depend on the base rate?"

\deqn{Utility Difference = EU_A - EU_B}

Interpretation:
\itemize{
  \item Positive difference: Procedure A has higher utility (preferred)
  \item Negative difference: Procedure B has higher utility (preferred)
  \item Zero difference: Procedures equivalent at that base rate
}

Lampinen et al. (2019) show that ROC dominance does not guarantee utility
dominance. A procedure with a lower pAUC might have higher utility at
certain base rates and cost structures.
}
\references{
Lampinen, J. M., Smith, A. M., & Wells, G. L. (2019). Four utilities in
eyewitness identification practice: Dissociations between receiver operating
characteristic analysis and expected utility analysis. \emph{Law and Human
Behavior, 43}(1), 26-44.
}
