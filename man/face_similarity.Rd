% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/similarity.R
\name{face_similarity}
\alias{face_similarity}
\title{Compute Face Similarity Between Two Images}
\usage{
face_similarity(
  img1_path,
  img2_path,
  model = "ArcFace",
  metric = "cosine",
  detector = "retinaface",
  return_embeddings = FALSE
)
}
\arguments{
\item{img1_path}{Path to the first (target) image.}

\item{img2_path}{Path to the second (foil) image.}

\item{model}{Character. Face recognition model. Default is "ArcFace".}

\item{metric}{Character. Distance metric: "cosine" (recommended), 
"euclidean", or "euclidean_l2".}

\item{detector}{Character. Face detection backend. Default is "retinaface".}

\item{return_embeddings}{Logical. If TRUE, also returns the embedding vectors.}
}
\value{
A list containing:
\itemize{
  \item distance - The computed distance (lower = more similar)
  \item similarity - Similarity score in [0,1] for cosine metric
  \item verified - Logical, TRUE if distance is below the model's threshold
  \item threshold - The verification threshold for this model/metric
  \item model - Model used
  \item metric - Metric used
  \item embeddings - (if return_embeddings=TRUE) List of both embeddings
}
}
\description{
Computes the similarity between two face images using deep learning embeddings.
This is the core function for comparing a target face to a foil face.
}
\details{
This function wraps DeepFace's verify function but is designed for
similarity measurement rather than identity verification. In lineup research,
we typically want to measure how similar foils are to the target, not whether
they are the same person.

The 'verified' field indicates whether the faces would be considered
"the same person" by the model, which in lineup research context means
the foil is too similar to the target (potential lineup bias).
}
\examples{
\dontrun{
# Compare target face to a foil
result <- face_similarity("target.jpg", "foil1.jpg")

# Check similarity score
result$similarity  # 0.85 would mean very similar

# Check if they'd be identified as same person (too similar for fair lineup)
result$verified  # TRUE would indicate problematic similarity
}

}
