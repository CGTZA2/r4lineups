% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/similarity.R
\name{lineup_similarity}
\alias{lineup_similarity}
\title{Compute Lineup Similarity Matrix}
\usage{
lineup_similarity(
  target_path,
  foil_paths,
  model = "ArcFace",
  metric = "cosine",
  detector = "retinaface",
  foil_names = NULL
)
}
\arguments{
\item{target_path}{Path to the target (suspect) face image.}

\item{foil_paths}{Character vector of paths to foil face images.}

\item{model}{Character. Face recognition model. Default is "ArcFace".}

\item{metric}{Character. Distance metric. Default is "cosine".}

\item{detector}{Character. Face detection backend. Default is "retinaface".}

\item{foil_names}{Optional character vector of names/labels for foils.
If NULL, uses file names.}
}
\value{
A tibble with columns:
\itemize{
  \item foil_id - Numeric ID (1, 2, 3, ...)
  \item foil_name - Name/label for the foil
  \item foil_path - Path to foil image
  \item distance - Distance from target (lower = more similar)
  \item similarity - Similarity score [0,1] for cosine metric
  \item verified - Would be identified as same person
  \item rank - Rank by similarity (1 = most similar to target)
}

Also includes attributes:
\itemize{
  \item target_path - Path to target image
  \item model - Model used
  \item metric - Metric used
  \item threshold - Verification threshold
}
}
\description{
Computes similarity between a target face and all foils in a lineup,
returning a comprehensive similarity analysis useful for lineup fairness
assessment.
}
\details{
This is the primary function for assessing lineup fairness from a
face similarity perspective. Foils that are too similar to the target
(low distance, high similarity, verified=TRUE) may bias the lineup.
Foils that are too dissimilar may make the target stand out.

For a fair lineup, foils should have moderate similarity to the target,
ideally within a range that makes them plausible alternatives without
being too close to the target.
}
\examples{
\dontrun{
# Analyze a 6-person lineup
foils <- paste0("foil", 1:5, ".jpg")
lineup <- lineup_similarity("target.jpg", foils)

# View results sorted by similarity
print(lineup)

# Check which foils might be too similar
lineup[lineup$verified, ]

# Get summary statistics
summary(lineup)
}

}
